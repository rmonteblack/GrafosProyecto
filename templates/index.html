{% extends "base.html" %}
{% block title %}Ruta Más Corta - Grafo{% endblock %}

{% block content %}
<div class="row g-4">
  <!-- Panel izquierdo -->
  <div class="col-md-4">
    <div class="card border-0 shadow-sm">
      <div class="card-body">
        <h4 class="card-title text-primary">Configuración del Grafo</h4>
        <!-- Añadir Nodo -->
        <div class="mb-3">
          <label class="form-label">Añadir Nodo</label>
          <div class="input-group">
            <input id="nodeInput" class="form-control" placeholder="Ej: A">
            <button id="addNodeBtn" class="btn btn-outline-primary">Añadir</button>
          </div>
        </div>
        <!-- Añadir Arista -->
        <div class="mb-3">
          <label class="form-label">Añadir Arista</label>
          <div class="row g-2">
            <div class="col-6">
              <select id="uSelect" class="form-select">
                <option value="">Origen...</option>
              </select>
            </div>
            <div class="col-6">
              <select id="vSelect" class="form-select">
                <option value="">Destino...</option>
              </select>
            </div>
          </div>
          <div class="input-group mt-2">
            <span class="input-group-text">Peso</span>
            <input id="wInput" type="number" class="form-control" placeholder="Peso" value="1">
          </div>
          <div class="form-check form-switch mt-2">
            <input id="directedSwitch" class="form-check-input" type="checkbox" checked>
            <label class="form-check-label" for="directedSwitch">Dirigido</label>
          </div>
          <button id="addEdgeBtn" class="btn btn-outline-success mt-2 w-100">Añadir Arista</button>
        </div>
        <hr>
        <!-- Calcular ruta -->
        <div class="mb-3">
          <label class="form-label">Ruta más corta</label>
          <div class="row g-2">
            <div class="col-6"><input id="sourceInput" class="form-control" placeholder="Origen"></div>
            <div class="col-6"><input id="targetInput" class="form-control" placeholder="Destino"></div>
          </div>
          <button id="calcBtn" class="btn btn-primary mt-2 w-100">Calcular Ruta</button>
          <div class="text-center mt-2">
            <span id="resultText" class="badge bg-info text-dark"></span>
          </div>
        </div>
        <div class="d-flex justify-content-between mt-3">
          <button id="clearGraphBtn" class="btn btn-secondary btn-sm">Limpiar</button>
          <button id="reloadBtn" class="btn btn-outline-info btn-sm">Actualizar</button>
        </div>
      </div>
    </div>
  </div>
  <!-- Panel derecho -->
  <div class="col-md-8">
    <div class="card border-0 shadow-sm" style="height: 600px;">
      <div class="card-body d-flex flex-column h-100">
        <h5 class="text-primary mb-3">Visualización del Grafo</h5>
        <div class="flex-grow-1 border rounded bg-white d-flex align-items-center justify-content-center">
          <canvas id="graphCanvas" width="700" height="500" class="w-100 h-100"></canvas>
        </div>
      </div>
    </div>
    <div class="card border-0 shadow-sm mt-3">
      <div class="card-body">
        <h6 class="text-secondary">Detalles</h6>
        <pre id="outputPre" class="bg-light border rounded p-2 small" style="height: 100px; overflow:auto;"></pre>
      </div>
    </div>
  </div>
</div>
{% endblock %}
